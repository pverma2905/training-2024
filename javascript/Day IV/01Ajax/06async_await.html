<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>

      function test(){
          console.log('Inside test!');
          return new Promise((resolve,reject) =>{
              // conditional check based on that either resolve or reject
              setTimeout(resolve,1000,'Successful!');
              //setTimeout(reject,1000,'Failure!');
          })
      }

      /*// using promises with then and catch
      function main(){
          //console.log(test());
          // ajax with promise - then and catch
          test()
          .then(res => console.log(res))
          .catch(err => console.error(err));
      }*/

      async function main(){
          try{
            // ajax with async await
            let result = await test(); // call looks more like synchronous
            console.log(result)

            // fetch with promise - then and catch
            /*fetch('https://jsonplaceholder.typicode.com/posts/1')
                .then((response) => response.json())
                .then((json) => console.log(json));*/

            // fetch with async - await
            const res = await fetch('https://jsonplaceholder.typicode.com/posts/2');
            const jsonRes = await res.json();
            console.log(jsonRes);
          }
          catch(err){
            console.error('Error ',err);
          }
      }

      main();

      /*
        Benefits of async/ await 

        Improved Readability
            Synchronous-like Structure
            Reduced Indetation - No Nested callbacks

        Simplied Error Handling
            try ... catch blocks
            Clearer Error Propagation

        Enhanced Code Organization
            Sequential Flow
            Reduced Complexity
      */
    </script>
  </body>
</html>
